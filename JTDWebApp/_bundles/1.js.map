{"version":3,"sources":["webpack:///./app/modules/travel/travel-detail.component.js","webpack:///./app/modules/travel/travel-detail.html","webpack:///./app/modules/travel/travel-list.component.js","webpack:///./app/modules/travel/travel-list.html","webpack:///./app/modules/travel/travel.module.js","webpack:///./app/modules/travel/travel.services.js","webpack:///./app/modules/travel/travel.states.js"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA,CAAc;AACgB;;AAEvB;AACP;AACA;AACA,GAAG;AACH,YAAY,mBAAO,CAAC,qEAAsB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA,0BAA0B;AAC1B;;AAEA,iBAAiB,8CAAO;AACxB,mBAAmB;AACnB;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB,SAAS;AACT;;AAEA,2BAA2B,gCAAgC;AAC3D;;AAEA;AACA,wBAAwB,mBAAmB,IAAI,uBAAuB;AACtE,yBAAyB,oBAAoB,IAAI,wBAAwB;;AAEzE,sCAAsC,kBAAkB;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW;AACX,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,2CAA2C,KAAK;AAChD,aAAa;AACb;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA,SAAS;;AAET;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,cAAc,8CAAO;AACrB;AACA;AACA,uBAAuB;AACvB,8CAA8C;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AC5PA,mzCAAmzC,0BAA0B,2lBAA2lB,2BAA2B,84BAA84B,qTAAqT,cAAc,iTAAiT,aAAa,uPAAuP,cAAc,8UAA8U,eAAe,0PAA0P,eAAe,mnJ;;;;;;;;;;;;ACA7zI;AAAA;AAAA;AAAA;AAAA,CAA+B;;AAExB;AACP;AACA;AACA,GAAG;AACH,YAAY,mBAAO,CAAC,iEAAoB;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,+DAA+D,SAAS;;AAExE;AACA;AACA;AACA;;;;;;;;;;;;ACrBA,8uCAA8uC,WAAW,mCAAmC,eAAe,+BAA+B,eAAe,+BAA+B,gBAAgB,+BAA+B,mBAAmB,+BAA+B,oBAAoB,0O;;;;;;;;;;;;ACA7+C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAAmE;AACL;;AAEX;;AAE+B;;AAE3E;;AAEP,wCAAwC,+DAAc;;AAEtD,iDAAiD,8EAAqB;AACtE,+CAA+C,0EAAmB;;AAElE;AACA;AACA,2BAA2B,0DAAW;AACtC,2BAA2B,gEAAiB;AAC5C,2BAA2B,8DAAe;AAC1C,CAAC,G;;;;;;;;;;;;ACnBD;AAAA;AAAA;;AAEO;;AAEP;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEe;AACf,mDAAmD,EAAC;;;;;;;;;;;;;;ACvBpD;AAAA;AAAA;AAAA;AAAA,CAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,kBAAkB;AAClB;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEO;AACP;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,E","file":"1.js","sourcesContent":["﻿\"use strict\";\r\nimport angular from \"angular\";\r\n\r\nexport const travelDetailComponent = {\r\n  bindings: {\r\n    dados: \"<\"\r\n  },\r\n  template: require(\"./travel-detail.html\"),\r\n  controller: [\r\n    \"$scope\",\r\n    \"$stateParams\",\r\n    \"travelServices\",\r\n    \"$state\",\r\n    \"companyServices\",\r\n    ($scope, $stateParams, travelServices, $state, companyServices) => {\r\n      var divMap = document.getElementById(\"map\");\r\n      var directionsService = {};\r\n      var directionsRenderer = {};\r\n      $scope.cityList = {};\r\n      let places = {\r\n        client: {},\r\n        origin: {},\r\n        destiny: {}\r\n      };\r\n      $scope.card = {\r\n        Destiny: \"\",\r\n        Origin: \"\",\r\n        Duration: \"\",\r\n        Distance: \"\",\r\n        Company: \"\"\r\n      };\r\n      var scopeId = $stateParams.id;\r\n      const Toast = Swal.mixin({\r\n        toast: true,\r\n        position: \"bottom\",\r\n        showConfirmButton: false,\r\n        timer: 3000\r\n      });\r\n\r\n      //#region AutoComplete\r\n      var options = {\r\n        url: phrase => \"api/Company/GetCompaniesWithParams/\" + phrase,\r\n        getValue: \"Name\",\r\n        ajaxSettings: {\r\n          dataType: \"json\",\r\n          method: \"GET\",\r\n          data: {\r\n            dataType: \"json\"\r\n          }\r\n        },\r\n        theme: \"plate-dark\",\r\n        requestDelay: 200,\r\n        list: {\r\n          onChooseEvent: function() {\r\n            var client = $(\"#client\").getSelectedItemData();\r\n            places.client = client;\r\n            $scope.card.Company = client.Name;\r\n            $scope.company = client.Name;\r\n            $scope.$apply();\r\n          }\r\n        }\r\n      };\r\n\r\n      var callbackOrigin = () => {\r\n        places.origin = $(\"#orig\").getSelectedItemData();\r\n        $scope.origin = places.origin.Name;\r\n        $scope.$apply();\r\n      };\r\n\r\n      var callbackDestination = () => {\r\n        places.destiny = $(\"#destination\").getSelectedItemData();\r\n        $scope.destiny = places.destiny.Name;\r\n        $scope.$apply();\r\n      };\r\n\r\n      var optionsCity = {\r\n        url: phrase => \"api/city/GetCityAutoComplete/\" + phrase,\r\n        getValue: \"Name\",\r\n        ajaxSettings: {\r\n          dataType: \"json\",\r\n          method: \"GET\",\r\n          data: {\r\n            dataType: \"json\"\r\n          }\r\n        },\r\n        theme: \"plate-dark\",\r\n        requestDelay: 200\r\n      };\r\n\r\n      optionsCity.list = { onChooseEvent: callbackDestination };\r\n      $(\"#destination\").easyAutocomplete(optionsCity);\r\n\r\n      var copy = angular.copy(optionsCity);\r\n      copy.list = { onChooseEvent: callbackOrigin };\r\n      $(\"#orig\").easyAutocomplete(copy);\r\n\r\n      $(\"#client\").easyAutocomplete(options);\r\n      //#endregion\r\n\r\n      if (scopeId != 0)\r\n        travelServices.getTravel(scopeId).success(function(travel) {\r\n          scopeId = travel.Id;\r\n          $(\"client\")\r\n            .val(travel.Client)\r\n            .trigger(\"change\");\r\n          $(\"orig\")\r\n            .val(travel.Origin)\r\n            .trigger(\"change\");\r\n          $(\"destination\")\r\n            .val(travel.Destiny)\r\n            .trigger(\"change\");\r\n          console.log(places);\r\n          console.log(this);\r\n          places.client.Id = travel.PersonId;\r\n          places.origin.Name = travel.Origin;\r\n          places.origin.Id = travel.OriginId;\r\n          places.origin.Initials = travel.OriginInit;\r\n          places.destiny.Name = travel.Destiny;\r\n          places.destiny.Id = travel.DestinyId;\r\n          places.destiny.Initials = travel.DestinyInit;\r\n          $scope.updateMaps();\r\n        });\r\n\r\n      $scope.initMap = () => {\r\n        directionsService = new window.google.maps.DirectionsService();\r\n        directionsRenderer = new window.google.maps.DirectionsRenderer();\r\n        var map = new window.google.maps.Map(divMap, {\r\n          zoom: 7,\r\n          center: { lat: -9.655412, lng: -54.601049 }\r\n        });\r\n        directionsRenderer.setMap(map);\r\n\r\n        $(\"#map\").animate({ width: \"100%\", height: \"100%\" });\r\n      };\r\n\r\n      $scope.updateMaps = _ => {\r\n        var origin = `${places.origin.Name}, ${places.origin.Initials}`;\r\n        var destiny = `${places.destiny.Name}, ${places.destiny.Initials}`;\r\n\r\n        travelServices.GetDirections({ origin, destiny }).success(function(r) {\r\n          var request = {\r\n            origin: new window.google.maps.LatLng(\r\n              r.StartAddress.Lat,\r\n              r.StartAddress.Long\r\n            ),\r\n            destination: new window.google.maps.LatLng(\r\n              r.EndAddress.Lat,\r\n              r.EndAddress.Long\r\n            ),\r\n            travelMode: \"DRIVING\"\r\n          };\r\n\r\n          places.duration = r.Duration;\r\n          places.km = r.Distance;\r\n          places.durationValue = r.durationValue;\r\n\r\n          $scope.card = {\r\n            Destiny: r.Destiny,\r\n            Origin: r.Origin,\r\n            Duration: r.Duration,\r\n            Distance: r.Distance,\r\n            Company: $scope.company\r\n          };\r\n\r\n          directionsService.route(request, (response, status) => {\r\n            if (status === \"OK\") directionsRenderer.setDirections(response);\r\n          });\r\n        });\r\n\r\n        if (scopeId == 0) {\r\n          travelServices\r\n            .saveTravel({\r\n              Id: 0,\r\n              PersonId: places.client.Id,\r\n              OriginId: places.origin.Id,\r\n              DestinyId: places.destiny.Id,\r\n              TotalKm: places.km,\r\n              DurationStr: places.duration,\r\n              durationValue: places.durationValue\r\n            })\r\n            .success(id => {\r\n              $state.go(\"travels.detail\", { id });\r\n            });\r\n        }\r\n      };\r\n\r\n      $scope.cancel = () => $state.go(\"travels.list\");\r\n\r\n      var searchCNPJ = cnpj =>\r\n        companyServices.searchCnpj(cnpj).then(rs => {\r\n          if (!rs) throw rs;\r\n          return rs;\r\n        });\r\n\r\n      var saveCompany = company =>\r\n        companyServices.saveCompany(company).then(rs => {\r\n          Toast.fire({\r\n            icon: \"success\",\r\n            title: \"Operacao Concluida!\"\r\n          });\r\n          return rs;\r\n        });\r\n\r\n      var removePointsAndTraces = value => value.replace(/[\\.\\-//]?/g, \"\");\r\n\r\n      var CNPJIsValid = value => {\r\n        var cnpj = removePointsAndTraces(value);\r\n\r\n        if (/[\\D]/g.test(cnpj)) return \"O CNPJ deve conter apenas numeros.\";\r\n\r\n        if (cnpj.length !== 14)\r\n          return \"O valor informado nao e um CNPJ valido.\";\r\n      };\r\n\r\n      $scope.openModalCnpj = () => {\r\n        Swal.fire({\r\n          title: \"Informe o CNPJ da empresa abaixo: \",\r\n          input: \"text\",\r\n          inputAttributes: {\r\n            autocapitalize: \"off\",\r\n            \"ui-br-cnpj-mask\": \"ui-br-cnpj-mask\",\r\n            \"max-length\": 18\r\n          },\r\n          customClass: {\r\n            input: \"ml-5 mr-5 w-75\"\r\n          },\r\n          showCancelButton: true,\r\n          confirmButtonText: \"Buscar\",\r\n          showLoaderOnConfirm: true,\r\n          inputValidator: CNPJIsValid,\r\n          preConfirm: searchCNPJ,\r\n          allowOutsideClick: () => !Swal.isLoading()\r\n        }).then(result => {\r\n          if (angular.isDefined(result.value) && result.value.status === 200) {\r\n            Swal.fire({\r\n              title: `CNPJ Encontrado!`,\r\n              text: `${result.value.data.FantasyName ||\r\n                result.value.data.Person.Name}`,\r\n              icon: \"info\",\r\n              showCancelButton: true,\r\n              confirmButtonColor: \"#3085d6\",\r\n              cancelButtonColor: \"#d33\",\r\n              cancelButtonText: \"Esta errado, quero cancelar.\",\r\n              confirmButtonText: \"Esta correto, pode salvar.\",\r\n              preConfirm: () => saveCompany(result.value.data)\r\n            });\r\n          }\r\n        });\r\n      };\r\n      $scope.initMap();\r\n    }\r\n  ]\r\n};\r\n","module.exports = \"<div class=\\\"card row shadow-sm px-2\\\">\\r\\n    <form class=\\\"col pl-0\\\">\\r\\n        <div class=\\\"card-body pt-2\\\">\\r\\n            <div class=\\\"card-title m-3\\\">\\r\\n                <h4 class=\\\"h4 font-weight-light\\\">Registro Viagem</h4>\\r\\n            </div>\\r\\n            <div class=\\\"row container\\\">\\r\\n                <div class=\\\"col-sm-6 py-4\\\">\\r\\n                    <div class=\\\"form-group col\\\">\\r\\n                        <label for=\\\"client\\\">Cliente:</label>\\r\\n                        <input type=\\\"text\\\" class=\\\"form-control\\\" id=\\\"client\\\" ng-model=\\\"company\\\"\\r\\n                            placeholder=\\\"Insira o nome de um cliente\\\">\\r\\n                        <small id=\\\"client\\\" class=\\\"form-text text-muted\\\">\\r\\n                            <a href=\\\"javascript:\\\" ng-click=\\\"openModalCnpj()\\\">Clique aqui para cadastrar com CNPJ</a>\\r\\n                        </small>\\r\\n                    </div>\\r\\n                    <div class=\\\"form-group col\\\">\\r\\n                        <label for=\\\"orig\\\">Origem:</label>\\r\\n                        <input type=\\\"text\\\" class=\\\"form-control\\\" id=\\\"orig\\\" ng-model=\\\"origin\\\" placeholder=\\\"Origem\\\">\\r\\n                        <small id=\\\"orig\\\" class=\\\"form-text text-muted\\\">\\r\\n                            <a href=\\\"javascript:\\\" ng-class=\\\"{'text-muted': !originCep }\\\"\\r\\n                                ng-click=\\\"originCep = !originCep\\\">Buscar por CEP</a>\\r\\n                        </small>\\r\\n                    </div>\\r\\n                    <div class=\\\"form-group col\\\">\\r\\n                        <label for=\\\"destination\\\">Destino:</label>\\r\\n                        <input type=\\\"text\\\" class=\\\"form-control\\\" id=\\\"destination\\\" ng-model=\\\"destiny\\\"\\r\\n                            placeholder=\\\"Destino\\\">\\r\\n                        <small id=\\\"destination\\\" class=\\\"form-text text-muted\\\">\\r\\n                            <a href=\\\"javascript:\\\" ng-class=\\\"{'text-muted': !destinyCep }\\\"\\r\\n                                ng-click=\\\"destinyCep = !destinyCep\\\">Buscar por CEP</a>\\r\\n                        </small>\\r\\n                    </div>\\r\\n                    <div class=\\\"row float-right mr-1\\\">\\r\\n                        <button ng-click=\\\"updateMaps()\\\"\\r\\n                            ng-disabled=\\\"!(destiny.length > 0 && origin.length > 0 && company.length > 0)\\\"\\r\\n                            class=\\\"btn btn-primary ml-1\\\">Atualizar</button>\\r\\n                        <button ng-click=\\\"cancel()\\\" class=\\\"btn btn-outline-secondary ml-1\\\">Cancelar</button>\\r\\n                    </div>\\r\\n                </div>\\r\\n                <div class=\\\"col-sm-6\\\">\\r\\n                    <div class=\\\"card col col-sm-12 h-100 shadow-sm\\\">\\r\\n                        <div class=\\\"row h-100\\\">\\r\\n                            <div id=\\\"map\\\" class=\\\"col-sm-12\\\" style=\\\"overflow: hidden;\\\"></div>\\r\\n                        </div>\\r\\n                        <div class=\\\"card-body py-3 px-0\\\">\\r\\n                            <div class=\\\"col no-wrap px-0\\\">\\r\\n                                <label for=\\\"\\\">Cliente: </label>\\r\\n                                <strong class=\\\"text-truncate\\\">{{card.Company}}</strong>\\r\\n                            </div>\\r\\n                            <!-- <div class=\\\"row\\\"> -->\\r\\n                            <div class=\\\"col no-wrap px-0\\\">\\r\\n                                <label for=\\\"\\\">De: </label>\\r\\n                                <strong class=\\\"text-truncate\\\">{{card.Origin}}</strong>\\r\\n                            </div>\\r\\n                            <div class=\\\"col no-wrap px-0\\\">\\r\\n                                <label for=\\\"\\\">Para: </label>\\r\\n                                <strong class=\\\"text-truncate\\\">{{card.Destiny}}</strong>\\r\\n                            </div>\\r\\n                            <!-- </div> -->\\r\\n                            <!-- <div class=\\\"row\\\"> -->\\r\\n                            <div class=\\\"col no-wrap px-0\\\">\\r\\n                                <label for=\\\"\\\">Km total: </label>\\r\\n                                <strong>{{card.Distance}}</strong>\\r\\n                            </div>\\r\\n                            <div class=\\\"col no-wrap px-0\\\">\\r\\n                                <label for=\\\"\\\">Duração: </label>\\r\\n                                <strong class=\\\"text-truncate\\\">{{card.Duration}}</strong>\\r\\n                            </div>\\r\\n                            <!-- </div> -->\\r\\n                        </div>\\r\\n                    </div>\\r\\n                </div>\\r\\n            </div>\\r\\n\\r\\n        </div>\\r\\n</div>\\r\\n</form>\\r\\n</div>\\r\\n</div>\\r\\n\\r\\n<div class=\\\"card row mt-3\\\">\\r\\n    <div class=\\\"card-body pb-0 pt-2\\\">\\r\\n        <div class=\\\"card-title m-3\\\">\\r\\n            <h4 class=\\\"h4 font-weight-light\\\">Veiculos/Motoristas</h4>\\r\\n        </div>\\r\\n        <div class=\\\"row container justify-content-around mb-3\\\">\\r\\n            <div class=\\\"card col col-7\\\">\\r\\n                <div class=\\\"card-body\\\">\\r\\n                    <div class=\\\"d-flex flex-row justify-content-around\\\">\\r\\n                        <div class=\\\"form-group col\\\">\\r\\n                            <label for=\\\"exampleFormControlSelect1\\\">Veiculos</label>\\r\\n                            <input list=\\\"browsers\\\" class=\\\"form-control\\\">\\r\\n                            <datalist id=\\\"browsers\\\">\\r\\n                                <option value=\\\"Internet Explorer\\\">\\r\\n                                <option value=\\\"Firefox\\\">\\r\\n                                <option value=\\\"Chrome\\\">\\r\\n                                <option value=\\\"Opera\\\">\\r\\n                                <option value=\\\"Safari\\\">\\r\\n                            </datalist>\\r\\n                        </div>\\r\\n                        <div class=\\\"form-group col\\\">\\r\\n                            <label for=\\\"exampleFormControlSelect1\\\">Motoristas</label>\\r\\n                            <input list=\\\"browsers\\\" class=\\\"form-control\\\">\\r\\n                            <datalist id=\\\"browsers\\\">\\r\\n                                <option value=\\\"Internet Explorer\\\">\\r\\n                                <option value=\\\"Firefox\\\">\\r\\n                                <option value=\\\"Chrome\\\">\\r\\n                                <option value=\\\"Opera\\\">\\r\\n                                <option value=\\\"Safari\\\">\\r\\n                            </datalist>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                    <div class=\\\"row d-flex justify-content-end pr-4\\\">\\r\\n                        <button class=\\\"btn btn-sm btn-primary col-2 mr-1\\\">Incluir</button>\\r\\n                    </div>\\r\\n                </div>\\r\\n            </div>\\r\\n            <div class=\\\"card col col-4 px-0 py-0\\\">\\r\\n                <div class=\\\"card-body pt-0 px-0 overflow-auto\\\">\\r\\n                    <table class=\\\"table table-striped h-25\\\">\\r\\n                        <thead class=\\\"shadow-sm text-center\\\">\\r\\n                            <tr>\\r\\n                                <th>Veic.</th>\\r\\n                                <th>Moto.</th>\\r\\n                                <th>Cust.</th>\\r\\n                            </tr>\\r\\n                        </thead>\\r\\n                        <tbody class=\\\"overflow-auto text-center h-75\\\">\\r\\n                            <tr>\\r\\n                                <td>AHS-1451</td>\\r\\n                                <td>Marcio</td>\\r\\n                                <td>$20,6</td>\\r\\n                            </tr>\\r\\n                            <tr>\\r\\n                                <td>AHS-1451</td>\\r\\n                                <td>Marcio</td>\\r\\n                                <td>$20,6</td>\\r\\n                            </tr>\\r\\n                            <tr>\\r\\n                                <td>AHS-1451</td>\\r\\n                                <td>Marcio</td>\\r\\n                                <td>$20,6</td>\\r\\n                            </tr>\\r\\n                            <tr>\\r\\n                                <td>AHS-1451</td>\\r\\n                                <td>Marcio</td>\\r\\n                                <td>$20,6</td>\\r\\n                            </tr>\\r\\n                            <tr>\\r\\n                                <td>AHS-1451</td>\\r\\n                                <td>Marcio</td>\\r\\n                                <td>$20,6</td>\\r\\n                            </tr>\\r\\n                            <tr>\\r\\n                                <td>AHS-1451</td>\\r\\n                                <td>Marcio</td>\\r\\n                                <td>$20,6</td>\\r\\n                            </tr>\\r\\n                        </tbody>\\r\\n                    </table>\\r\\n                </div>\\r\\n            </div>\\r\\n        </div>\\r\\n    </div>\\r\\n</div>\\r\\n</div>\\r\\n</div>\\r\\n\\r\\n<div class=\\\"card row mt-3\\\">\\r\\n    <div class=\\\"card-body pb-0 pt-2\\\">\\r\\n        <div class=\\\"card-title m-3\\\">\\r\\n            <h4 class=\\\"h4 font-weight-light\\\">Orçamento</h4>\\r\\n        </div>\\r\\n    </div>\\r\\n</div>\";","﻿import angular from \"angular\";\r\n\r\nexport const travelListComponent = {\r\n  bindings: {\r\n    dados: \"<\"\r\n  },\r\n  template: require(\"./travel-list.html\"),\r\n  controller: [\r\n    \"$scope\",\r\n    \"$stateParams\",\r\n    \"travelServices\",\r\n    \"$state\",\r\n    \"$injector\",\r\n    function($scope, $stateParams, travelServices, $state, $injector) {\r\n      $scope.travels = [];\r\n      \r\n      $scope.loadTravel = (id) => $state.go(\"travels.detail\", { id: id });\r\n\r\n      travelServices.getTravels().success(r => ($scope.travels = r));\r\n    }\r\n  ]\r\n};\r\n","module.exports = \"<div class=\\\"d-flex justify-content-between row flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom\\\">\\r\\n    <h3 class=\\\"col-sm-8 font-weight-light\\\">Viagens</h3>\\r\\n    <div class=\\\"btn-toolbar col-xs-4\\\">\\r\\n        <div class=\\\"btn-block\\\">\\r\\n            <button type=\\\"button\\\"\\r\\n                    class=\\\"\\r\\n                       btn pmd-btn-outline btn-sm pmd-btn-raised\\r\\n                       btn-default\\\"\\r\\n                    ng-click=\\\"loadTravel(0)\\\">\\r\\n                Nova Viagem\\r\\n            </button>\\r\\n        </div>\\r\\n    </div>\\r\\n</div>\\r\\n<div class=\\\"table-responsive\\\">\\r\\n    <table class=\\\"table table-hover table-striped table-sm table-bordered\\\">\\r\\n        <thead class=\\\"thead-dark\\\">\\r\\n            <tr class=\\\"text-center\\\">\\r\\n                <th>#</th>\\r\\n                <th>Cliente</th>\\r\\n                <th>De</th>\\r\\n                <th>Para</th>\\r\\n                <th>Distancia</th>\\r\\n                <th>Duração</th>\\r\\n            </tr>\\r\\n        </thead>\\r\\n        <tbody>\\r\\n            <tr ng-if=\\\"travels.length > 0\\\" ng-repeat=\\\"travel in travels\\\" class=\\\"text-center\\\">\\r\\n                <td ng-click=\\\"loadTravel(travel.Id)\\\"><a href=\\\"javascript:\\\">{{travel.Id}}</a></td>\\r\\n                <td>{{travel.Client}}</td>\\r\\n                <td>{{travel.Origin}}</td>\\r\\n                <td>{{travel.Destiny}}</td>\\r\\n                <td>{{travel.TotalKmStr}}</td>\\r\\n                <td>{{travel.DurationStr}}</td>\\r\\n            </tr>\\r\\n            <tr>\\r\\n                <td ng-if=\\\"travels.length == 0\\\" class=\\\"text-center\\\" colspan=\\\"6\\\">Não existem dados...</td>\\r\\n            </tr>\\r\\n        </tbody>\\r\\n    </table>\\r\\n</div>\\r\\n\";","﻿import { travelDetailComponent } from \"./travel-detail.component\";\r\nimport { travelListComponent } from \"./travel-list.component\";\r\n\r\nimport { travelServices } from \"./travel.services\";\r\n\r\nimport { travelState, travelDetailState, travelListState } from \"./travel.states\";\r\n\r\nexport const TRAVEL_MODULE = angular.module('travel.module', []);\r\n\r\nTRAVEL_MODULE.service('travelServices', travelServices);\r\n\r\nTRAVEL_MODULE.component('travelDetailComponent', travelDetailComponent);\r\nTRAVEL_MODULE.component('travelListComponent', travelListComponent);\r\n\r\nTRAVEL_MODULE.config(['$uiRouterProvider', function ($uiRouterProvider) {\r\n    var stateRegistry = $uiRouterProvider.stateRegistry;\r\n    stateRegistry.register(travelState);\r\n    stateRegistry.register(travelDetailState);\r\n    stateRegistry.register(travelListState);\r\n}]);","﻿travelServices.$inject = ['$http'];\r\n\r\nexport function travelServices($http) {\r\n\r\n    var api = window.location.origin + window.location.pathname + 'api/';\r\n    var service = {};\r\n\r\n    service.getTravels = () => $http.get(api + 'travel/');\r\n\r\n    service.getTravel = (id) => $http.get(api + 'travel/' + id);\r\n\r\n    service.getCities = () => $http.get(api + 'city/GetCities');\r\n\r\n    service.saveTravel = (model) => $http.post(api + 'travel/save', model);\r\n\r\n    service.getCompanies = (name) => $http.get(api + 'Company/GetCompaniesWithParams/' + name);\r\n\r\n    service.GetDirections = (model) => $http.get(api + 'integrations/maps/direction?' + $.param(model));\r\n\r\n    return service;\r\n}\r\n\r\nexport default angular.module('services.travelServices', [])\r\n    .service('travelServices', travelServices).name;\r\n","﻿export const travelState = {\r\n    parent: 'app',\r\n    name: 'travels',\r\n    url: '/travels',\r\n    dsr: true,\r\n    views: {\r\n        'viewTravel': {\r\n            template: '<div ui-view=\"viewList\"></div><div ui-view=\"viewDetail\"></div>',\r\n        }\r\n    },\r\n    deepStateRedirect: {\r\n        default: { state: 'travels.list' }\r\n    }\r\n};\r\n\r\nexport const travelDetailState = {\r\n    name: 'travels.detail',\r\n    url: '/:id',\r\n    views: {\r\n        'viewDetail': {\r\n            component: 'travelDetailComponent',\r\n        }\r\n    },\r\n};\r\n\r\nexport const travelListState = {\r\n    name: 'travels.list',\r\n    views: {\r\n        'viewList': {\r\n            component: 'travelListComponent',\r\n        },\r\n    }\r\n};"],"sourceRoot":""}